(function(c,d){"function"===typeof define&&define.amd?define(["angular"],d):"object"===typeof exports?module.exports=d(require("angular")):d(c.angular)})(this,function(c){function d(d){return["$rootScope","$window","$log","$timeout",function(m,h,f,n){var e=function(b){var a;try{a=h[b]}catch(c){a=!1}if(a&&"localStorage"===b){b="__"+Math.round(1E7*Math.random());try{localStorage.setItem(b,b),localStorage.removeItem(b)}catch(c){a=!1}}return a}(d)||(f.warn("This browser does not support Web Storage!"),
{setItem:function(){},getItem:function(){}}),a={$default:function(b){for(var d in b)c.isDefined(a[d])||(a[d]=b[d]);return a},$reset:function(b){for(var c in a)"$"===c[0]||delete a[c]&&e.removeItem("ngStorage-"+c);return a.$default(b)}},g,l;try{e=h[d],e.length}catch(b){f.warn("This browser does not support Web Storage!"),e={}}f=0;for(var p=e.length,k;f<p;f++)(k=e.key(f))&&"ngStorage-"===k.slice(0,10)&&(a[k.slice(10)]=c.fromJson(e.getItem(k)));g=c.copy(a);m.$watch(function(){var b;l||(l=n(function(){l=
null;if(!c.equals(a,g)){b=c.copy(g);c.forEach(a,function(a,d){c.isDefined(a)&&"$"!==d[0]&&e.setItem("ngStorage-"+d,c.toJson(a));delete b[d]});for(var d in b)e.removeItem("ngStorage-"+d);g=c.copy(a)}},100,!1))});h.addEventListener&&h.addEventListener("storage",function(b){"ngStorage-"===b.key.slice(0,10)&&(b.newValue?a[b.key.slice(10)]=c.fromJson(b.newValue):delete a[b.key.slice(10)],g=c.copy(a),m.$apply())});return a}]}return c.module("ngStorage",[]).factory("$localStorage",d("localStorage")).factory("$sessionStorage",
d("sessionStorage"))});
